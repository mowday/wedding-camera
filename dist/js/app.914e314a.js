(function(t){function e(e){for(var a,i,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)i=o[d],s[i]&&f.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0259":function(t,e,n){},"034f":function(t,e,n){"use strict";var a=n("64a9"),s=n.n(a);s.a},"242e":function(t,e,n){"use strict";var a=n("a979"),s=n.n(a);s.a},"2a2b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("collage")],1)},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.error?n("div",[t._v("\n  "+t._s(t.error)+"\n")]):n("div",{staticClass:"wrapper"},[n("camera",{staticClass:"camera",model:{value:t.countdown,callback:function(e){t.countdown=e},expression:"countdown"}}),n("div",{staticClass:"grid"},[n("div",{staticClass:"slot"},[n("image-switcher",{attrs:{src:t.slotA}})],1),n("div",{staticClass:"slot"},[n("image-switcher",{attrs:{src:t.slotB}})],1)]),n("div",{staticClass:"grid"},[n("div",{staticClass:"slot"},[n("image-switcher",{attrs:{src:t.slotC}})],1),n("div",{staticClass:"slot"},[n("image-switcher",{attrs:{src:t.slotD}})],1)]),n("div",{staticClass:"middle-circle",on:{click:function(e){t.countdown=!0}}},[t._m(0)])],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"outer"},[n("div",{staticClass:"inner"},[n("div",{staticClass:"wedding"},[t._v("BrÃ¶llop")]),n("div",{staticClass:"names"},[t._v("Camilla"),n("br"),t._v("&"),n("br"),t._v("Henrik")]),n("div",{staticClass:"dates"},[t._v("2019-01-01")])])])}],c=n("619d"),u=(n("96cf"),n("3b8d")),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-switcher-wrapper"},[n("img",{ref:"top",staticClass:"image-switcher-top",class:{active:t.showTop},on:{load:function(e){return t.imageReady(!0)}}}),n("img",{ref:"bottom",staticClass:"image-switcher-bottom",on:{load:function(e){return t.imageReady(!1)}}})])},d=[],f={name:"ImageSwitcher",data:function(){return{showTop:!1}},props:{src:String},mounted:function(){this.src&&this.update(this.src)},methods:{update:function(t){var e=this.showTop?this.$refs.bottom:this.$refs.top;e.src=t,e.complete&&this.imageReady(!this.showTop)},imageReady:function(t){this.showTop=t}},watch:{src:function(t){this.update(t)}}},h=f,p=(n("c1f6"),n("2877")),v=Object(p["a"])(h,l,d,!1,null,"8cc605d6",null),m=v.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"camera-wrapper",class:{active:t.value}},[0!=t.countdown?n("div",{staticClass:"countdown"},[t._v(t._s(t.countdown))]):t._e(),n("video",{ref:"video",class:{visible:!t.image}}),n("canvas",{ref:"canvas",class:{visible:t.image}})])},w=[],b={name:"Camera",data:function(){return{countdown:7,running:!1,image:void 0}},methods:{start:function(){var t=this;this.countdown=7;var e=setInterval(function(){t.countdown--,0==t.countdown&&(clearInterval(e),t.takePhoto())},1e3)},takePhoto:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Take Photo"),console.log(this.$refs.video),this.$refs.canvas.width=this.$refs.video.clientWidth,this.$refs.canvas.height=this.$refs.video.clientHeight,this.$refs.canvas.getContext("2d").drawImage(this.$refs.video,0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.image=this.$refs.canvas.toDataURL("image/jpeg",1),t.next=8,fetch("http://localhost:3000/upload",{method:"POST",body:this.image});case 8:t.sent,setTimeout(function(){e.$emit("input",!1),e.image=void 0},5e3);case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;navigator.getUserMedia({video:!0,audio:!1},function(e){var n=t.$refs.video;n.srcObject=e,n.play(),t.canvas=document.createElement("canvas")},console.log)},props:{value:{type:Boolean,default:!1}},watch:{value:function(t,e){t&&!e&&this.start()}}},x=b,C=(n("242e"),Object(p["a"])(x,g,w,!1,null,"1c82b702",null)),_=C.exports,y={name:"Collage",components:{ImageSwitcher:m,Camera:_},data:function(){return{images:[],slotA:void 0,slotB:void 0,slotC:void 0,slotD:void 0,lastSlot:0,lastIndex:0,countdown:!1,error:void 0}},mounted:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return setInterval(Object(u["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateImages();case 2:e.swapNextSlot();case 3:case"end":return t.stop()}},t)})),1e4),t.next=3,this.updateImages();case 3:this.swapNextSlot(),this.swapNextSlot(),this.swapNextSlot(),this.swapNextSlot();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{getImage:function(){if(0!==this.images.length){var t=this.lastIndex++;return t>this.images.length&&(Object(c["a"])("index"),t=0,this.lastIndex=0),this.images[t]}},updateImages:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/images.json");case 2:if(e=t.sent,200!==e.status){t.next=11;break}return t.next=6,e.json();case 6:n=t.sent,this.images=n,console.log("Images updated",this.images),t.next=12;break;case 11:console.log("Failed to get images");case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),swapNextSlot:function(){navigator.getUserMedia||(this.error="No webcam detected :(");var t=["slotA","slotB","slotC","slotD"],e=t[this.lastSlot++];this[e]=this.getImage(),this.lastSlot>t.length&&(this.lastSlot=0)}}},j=y,O=(n("b67a"),Object(p["a"])(j,i,o,!1,null,"6fa76480",null)),$=O.exports,S={name:"app",components:{Collage:$}},k=S,I=(n("034f"),Object(p["a"])(k,s,r,!1,null,null,null)),R=I.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(R)}}).$mount("#app")},"64a9":function(t,e,n){},a979:function(t,e,n){},b67a:function(t,e,n){"use strict";var a=n("0259"),s=n.n(a);s.a},c1f6:function(t,e,n){"use strict";var a=n("2a2b"),s=n.n(a);s.a}});
//# sourceMappingURL=app.914e314a.js.map